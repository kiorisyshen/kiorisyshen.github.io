<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Vector Swizzling and Parameter Pack in C++ | Kio's Spot</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script src="https://www.googletagmanager.com/gtag/js?id=UA-160042218-1" async></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-160042218-1');
</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><div class="darkmode-toggle">üåì</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 6.2.0">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2393043751805170"
crossorigin="anonymous"></script>
</head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Vector Swizzling and Parameter Pack in C++</h1><a id="logo" href="/.">Kio's Spot</a><p class="description">ÊÖ¢ÊÖ¢ÂâçËøõ Move forward gradually</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Vector Swizzling and Parameter Pack in C++</h1><div class="post-meta">2018-08-27<span> | </span><span class="category"><a href="/categories/C/">C++</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1k</span><span class="post-meta-item-text"> Words</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 6</span><span class="post-meta-item-text"> Minutes</span></span></span></div><a class="disqus-comment-count" data-disqus-identifier="2018/08/27/Vector Swizzling and Parameter Pack in C++/" href="/2018/08/27/Vector%20Swizzling%20and%20Parameter%20Pack%20in%20C++/#disqus_thread"></a><div class="post-content"><p>Recently I am interested in game engine and start reading articles with code in <a target="_blank" rel="noopener" href="https://github.com/netwarm007/GameEngineFromScratch">GameEngineFromScratch</a>. Due to the ‚Äúfrom scratch‚Äù, a self designed math library would never be ignored. In vector math computing, a handy feature called ‚Äúswizzling‚Äù is widely used.</p>
<h2 id="What-is-‚Äúswizzling‚Äù"><a href="#What-is-‚Äúswizzling‚Äù" class="headerlink" title="What is ‚Äúswizzling‚Äù"></a>What is ‚Äúswizzling‚Äù</h2><p>The two most popular rendering APIs, OpenGL and DirectX, both provide GPU computing acceleration. For using GPU for computation, we need to write our computation code in provided shader language: GLSL for OpenGL and HLSL for DirectX. These languages both support ‚Äúswizzling‚Äù feature for vector computing. A simple sample of swizzling is shown below:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Vec2d <span class="title">vecA</span><span class="params">(<span class="number">1.0</span>, <span class="number">2.0</span>)</span></span>;   <span class="comment">// should support multiple type like, int, float or double</span></span><br><span class="line">Vec2d vecB, vecC;</span><br><span class="line">vecB.yx = vecA;     <span class="comment">// vecB = (2.0, 1.0)</span></span><br><span class="line">vecC = vecA.yx;     <span class="comment">// vecC = (2.0, 1.0)</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">// Should also work for Vec3, Vec4 ...</span></span><br></pre></td></tr></table></figure>
<p>Since this feature is handy in vector computing, let‚Äôs try implementing it in C++.</p>
<h2 id="Basic-swizzling-in-template"><a href="#Basic-swizzling-in-template" class="headerlink" title="Basic swizzling in template"></a>Basic swizzling in template</h2><p>Because we are implementing vector for multiple base type (int, float, etc.), it first come with template. So let‚Äôs first implement swizzling of a 2d vector type with supporting on different base types.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">template</span>&lt;<span class="keyword">typename</span>&gt; <span class="keyword">class</span> <span class="title class_">TT</span>, <span class="keyword">typename</span> T, <span class="type">int</span> A, <span class="type">int</span> B&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">swizzle</span>&#123;</span><br><span class="line">    T v[<span class="number">2</span>];</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    TT&lt;T&gt;&amp; <span class="keyword">operator</span>=(<span class="type">const</span> TT&lt;T&gt;&amp; rhs)</span><br><span class="line">    &#123;</span><br><span class="line">        v[A] = rhs.x;</span><br><span class="line">        v[B] = rhs.y;</span><br><span class="line">        <span class="keyword">return</span> *(TT&lt;T&gt;*)<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">operator</span> <span class="built_in">TT</span>&lt;T&gt;() <span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">TT</span>&lt;T&gt;(v[A], v[B]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Vector2Type</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">union</span> &#123;</span><br><span class="line">        T data[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">struct</span> &#123;T x, y;&#125;;</span><br><span class="line">        swizzle&lt;Vector2Type, T, <span class="number">0</span>, <span class="number">1</span>&gt; xy;</span><br><span class="line">        swizzle&lt;Vector2Type, T, <span class="number">1</span>, <span class="number">0</span>&gt; yx;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">Vector2Type</span>&lt;T&gt;() &#123;&#125;;</span><br><span class="line">    <span class="built_in">Vector2Type</span>&lt;T&gt;(<span class="type">const</span> T&amp; _v) : <span class="built_in">x</span>(_v), <span class="built_in">y</span>(_v) &#123;&#125;;</span><br><span class="line">    <span class="built_in">Vector2Type</span>&lt;T&gt;(<span class="type">const</span> T&amp; _x, <span class="type">const</span> T&amp; _y) : <span class="built_in">x</span>(_x), <span class="built_in">y</span>(_y) &#123;&#125;;</span><br><span class="line">    <span class="keyword">operator</span> T*() &#123; <span class="keyword">return</span> data; &#125;;</span><br><span class="line">    <span class="keyword">operator</span> <span class="type">const</span> T*() <span class="type">const</span> &#123; <span class="keyword">return</span> <span class="built_in">static_cast</span>&lt;<span class="type">const</span> T*&gt;(data); &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> Vector2Type&lt;<span class="type">int</span>&gt; Vec2i;</span><br><span class="line"><span class="keyword">typedef</span> Vector2Type&lt;<span class="type">float</span>&gt; Vec2f;</span><br><span class="line"><span class="keyword">typedef</span> Vector2Type&lt;<span class="type">double</span>&gt; Vec2d;</span><br></pre></td></tr></table></figure>
<p>Here we use ‚Äútemplate of template‚Äù for the swizzle class, because our 2-dimensional vector type need to use the type for basic value.</p>
<h2 id="Swizzling-for-multi-dimension-vector-classes"><a href="#Swizzling-for-multi-dimension-vector-classes" class="headerlink" title="Swizzling for multi-dimension vector classes"></a>Swizzling for multi-dimension vector classes</h2><p>The code above looks so far so good. However, consider about implementing 3d or 4d vector, there would be swizzle3d, swizzle4d, ‚Ä¶, etc. which, make the code like a mess. In C++11, we could resolve this problem using template parameter pack.</p>
<p>The parameter pack makes us to declare one type of parameter without number constrains. It mostly used in function arguments and multiple arguments in template. Below is a small sample of variadic functions modified from <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/1579719/variable-number-of-parameters-in-function-in-c">here</a>:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdarg&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">average</span><span class="params">(<span class="type">int</span> count, ...)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    va_list ap;</span><br><span class="line">    <span class="type">double</span> total = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">va_start</span>(ap, count); <span class="comment">// Requires the last fixed parameter (to get the address)</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>; j&lt;count; ++j)</span><br><span class="line">        <span class="comment">// Requires the type to cast to.</span></span><br><span class="line">        <span class="comment">// Increments ap to the next argument.</span></span><br><span class="line">        total += <span class="built_in">va_arg</span>(ap, <span class="type">double</span>); </span><br><span class="line">    <span class="built_in">va_end</span>(ap);</span><br><span class="line">    <span class="keyword">return</span> total/<span class="built_in">double</span>(count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Now let‚Äôs use template parameter pack to implement swizzle for multi-dimensional vectors. The code looks like:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">template</span>&lt;<span class="keyword">typename</span>&gt; <span class="keyword">class</span> <span class="title class_">TT</span>, <span class="keyword">typename</span> T, <span class="type">int</span> ... Indexes&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">swizzle</span>&#123;</span><br><span class="line">    <span class="comment">// here sizeof...() is a function to query the number of parameter pack</span></span><br><span class="line">    T v[<span class="keyword">sizeof</span>...(Indexes)];  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    TT&lt;T&gt;&amp; <span class="keyword">operator</span>=(<span class="type">const</span> TT&lt;T&gt;&amp; rhs)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> indexes[] = &#123; Indexes... &#125;; <span class="comment">// unpack</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">sizeof</span>...(Indexes); i++) &#123;</span><br><span class="line">            v[indexes[i]] = rhs[i]; <span class="comment">// access pack element</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> *(TT&lt;T&gt;*)<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">operator</span> <span class="built_in">TT</span>&lt;T&gt;() <span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// unpack</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">TT</span>&lt;T&gt;(v[Indexes]...);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// --------------------------</span></span><br><span class="line"><span class="comment">// Define multi-dimensional vector type</span></span><br><span class="line"><span class="comment">// --------------------------</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Vector2Type</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">union</span> &#123;</span><br><span class="line">        T data[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">struct</span> &#123;T x, y;&#125;;</span><br><span class="line">        swizzle&lt;Vector2Type, T, <span class="number">0</span>, <span class="number">1</span>&gt; xy;</span><br><span class="line">        swizzle&lt;Vector2Type, T, <span class="number">1</span>, <span class="number">0</span>&gt; yx;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">Vector2Type</span>&lt;T&gt;() &#123;&#125;;</span><br><span class="line">    <span class="built_in">Vector2Type</span>&lt;T&gt;(<span class="type">const</span> T&amp; _v) : <span class="built_in">x</span>(_v), <span class="built_in">y</span>(_v) &#123;&#125;;</span><br><span class="line">    <span class="built_in">Vector2Type</span>&lt;T&gt;(<span class="type">const</span> T&amp; _x, <span class="type">const</span> T&amp; _y) : <span class="built_in">x</span>(_x), <span class="built_in">y</span>(_y) &#123;&#125;;</span><br><span class="line">    <span class="keyword">operator</span> T*() &#123; <span class="keyword">return</span> data; &#125;;</span><br><span class="line">    <span class="keyword">operator</span> <span class="type">const</span> T*() <span class="type">const</span> &#123; <span class="keyword">return</span> <span class="built_in">static_cast</span>&lt;<span class="type">const</span> T*&gt;(data); &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Vector3d</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Vector3Type</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">union</span> &#123;</span><br><span class="line">        T data[<span class="number">3</span>];</span><br><span class="line">        <span class="keyword">struct</span> &#123;T x, y, z;&#125;;</span><br><span class="line">        swizzle&lt;Vector2Type, T, <span class="number">0</span>, <span class="number">1</span>&gt; xy;</span><br><span class="line">        swizzle&lt;Vector2Type, T, <span class="number">1</span>, <span class="number">0</span>&gt; yx;</span><br><span class="line">        swizzle&lt;Vector2Type, T, <span class="number">0</span>, <span class="number">2</span>&gt; xz;</span><br><span class="line">        swizzle&lt;Vector2Type, T, <span class="number">2</span>, <span class="number">0</span>&gt; zx;</span><br><span class="line">        swizzle&lt;Vector2Type, T, <span class="number">1</span>, <span class="number">2</span>&gt; yz;</span><br><span class="line">        swizzle&lt;Vector2Type, T, <span class="number">2</span>, <span class="number">1</span>&gt; zy;</span><br><span class="line">        swizzle&lt;Vector3Type, T, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&gt; xyz;</span><br><span class="line">        swizzle&lt;Vector3Type, T, <span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>&gt; yxz;</span><br><span class="line">        swizzle&lt;Vector3Type, T, <span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>&gt; xzy;</span><br><span class="line">        swizzle&lt;Vector3Type, T, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>&gt; zxy;</span><br><span class="line">        swizzle&lt;Vector3Type, T, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>&gt; yzx;</span><br><span class="line">        swizzle&lt;Vector3Type, T, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>&gt; zyx;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">Vector3Type</span>&lt;T&gt;() &#123;&#125;;</span><br><span class="line">    <span class="built_in">Vector3Type</span>&lt;T&gt;(<span class="type">const</span> T&amp; _v) : <span class="built_in">x</span>(_v), <span class="built_in">y</span>(_v), <span class="built_in">z</span>(_v) &#123;&#125;;</span><br><span class="line">    <span class="built_in">Vector3Type</span>&lt;T&gt;(<span class="type">const</span> T&amp; _x, <span class="type">const</span> T&amp; _y, <span class="type">const</span> T&amp; _z) : <span class="built_in">x</span>(_x), <span class="built_in">y</span>(_y), <span class="built_in">z</span>(_z) &#123;&#125;;</span><br><span class="line">    <span class="keyword">operator</span> T*() &#123; <span class="keyword">return</span> data; &#125;;</span><br><span class="line">    <span class="keyword">operator</span> <span class="type">const</span> T*() <span class="type">const</span> &#123; <span class="keyword">return</span> <span class="built_in">static_cast</span>&lt;<span class="type">const</span> T*&gt;(data); &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Vector4d...</span></span><br></pre></td></tr></table></figure>

<h2 id="At-the-end"><a href="#At-the-end" class="headerlink" title="At the end"></a>At the end</h2><p>Template is really really powerful for creating efficient library.</p>
<p>The remaining part of our math library is filling various operator computations. These operation could be simply written in C++, or we can use single instruction, multiple data (SIMD) accelerate strategies like MMX, SSE, AVX (x86) or NEON (arm). I will following the step of <a target="_blank" rel="noopener" href="https://github.com/netwarm007/GameEngineFromScratch">GameEngineFromScratch</a> and try to use ISPC (x86) from Intel.</p>
</div><div class="tags"><a href="/tags/Coding Note"><i class="fa fa-tag">Coding Note</i></a><a href="/tags/C++ Gaming"><i class="fa fa-tag">C++ Gaming</i></a></div><div class="post-nav"><a class="pre" href="/2019/04/12/Multi-view%20Geometry%201/">Multi-view Geometry 0 Background</a><a class="next" href="/2016/04/01/Neural%20Network%20III%20Backpropagation/">Neural Network III Backpropagation</a></div><link rel="stylesheet" type="text/css" href="https://unpkg.com/disqusjs@1.3/dist/disqusjs.css"><script type="text/javascript" src="https://unpkg.com/disqusjs@1.3/dist/disqus.js"></script><script type="text/javascript" id="disqus-count-script">$(function() {
  var xhr = new XMLHttpRequest();
  xhr.open('GET', '//disqus.com/next/config.json', true);
  xhr.timeout = 2500;
  xhr.onreadystatechange = function () {
    if (xhr.readyState === 4 && xhr.status === 200) {
      $('.post-meta .post-comments-count').show();
      var s = document.createElement('script');
      s.id = 'dsq-count-scr';
      s.src = 'https://kiosspot.disqus.com/count.js';
      s.async = true;
      (document.head || document.body).appendChild(s);
    }
  };
  xhr.ontimeout = function () { xhr.abort(); };
  xhr.send(null);
});</script><div class="comments" id="disqus_thread"><script type="text/javascript">// Load comments with DisqusJS
function loadComments() {
  window.dsqjs = new DisqusJS({
    shortname: 'kiosspot',
    siteName: 'Kio\'s Spot',
    identifier: '2018/08/27/Vector Swizzling and Parameter Pack in C++/',
    url: 'http://kiorisyshen.github.io/2018/08/27/Vector Swizzling and Parameter Pack in C++/',
    title: 'Vector Swizzling and Parameter Pack in C++',
    api: '',
    apikey: '',
    admin: '',
    adminLabel: ''
  });
}
// Lazy load {# Credit: https://github.com/theme-next/hexo-theme-next/blob/master/layout/_third-party/comments/disqus.swig #}
(function () {
  var offsetTop = document.getElementById('disqus_thread').offsetTop - window.innerHeight;
  if (offsetTop <= 0) {
    // Load directly when there's no scrollbar
    window.addEventListener('load', loadComments, false);
  } else {
    var disqusScroll = function () {
      // offsetTop may changes because of manually resizing browser window or lazy loading images
      var offsetTop = document.getElementById('disqus_thread').offsetTop - window.innerHeight;
      var scrollTop = window.scrollY;

      // Pre-load comments a bit? (margin or anything else)
      if (offsetTop - scrollTop < 60) {
        window.removeEventListener('scroll', disqusScroll);
        loadComments();
      }
    };
    window.addEventListener('scroll', disqusScroll);
  }
})();
// Scroll to comments automatically if #comment-xxx anchor specified
window.addEventListener('load', function () {
  // I don't know why, it just works.
  window.setTimeout(function () {
    if (location.hash.indexOf('#comment-') !== -1) {
      document.getElementById('disqus_thread').scrollIntoView(true);
    }
  }, 100);
}, false);
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://kiorisyshen.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/C/Lidar/">Lidar</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Computer-Graphics/">Computer Graphics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Image-Processing/">Image Processing</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Machine-Learning/">Machine Learning</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Multi-view-Geometry/">Multi-view Geometry</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Coding-Note/" style="font-size: 15px;">Coding Note</a> <a href="/tags/C-Gaming/" style="font-size: 15px;">C++ Gaming</a> <a href="/tags/OpenGL/" style="font-size: 15px;">OpenGL</a> <a href="/tags/Metal/" style="font-size: 15px;">Metal</a> <a href="/tags/Learning-note/" style="font-size: 15px;">Learning note</a> <a href="/tags/Neural-Network/" style="font-size: 15px;">Neural Network</a> <a href="/tags/Paper/" style="font-size: 15px;">Paper</a> <a href="/tags/ROS/" style="font-size: 15px;">ROS</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//kiosspot.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://silentming.net/" title="SilentMing's Gensokyo" target="_blank">SilentMing's Gensokyo</a><ul></ul><a href="https://unlimitedcodeworks.xyz/" title="Unlimited Code Works" target="_blank">Unlimited Code Works</a><ul></ul><a href="https://blog.icehoney.me/" title="Èõ™ÊúàÁßãÊ∞¥" target="_blank">Èõ™ÊúàÁßãÊ∞¥</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright ¬© 2022 <a href="/." rel="nofollow">Kio's Spot.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>